#-*-coding:utf-8-*-import osimport reimport platformclass Adjust_Redis:    def __init__(self, folder):        self.folder = folder        self.TIME_MATCH_STRING = r'|[0-9]+|'        self.BACKSLASH = '\\'        self.specialChar = ['{', '}', '[', ']']    def add_backslash(self, line, end_line=0):        start = 0        end = 0        temp_line = line        temp_line = temp_line.replace('+', '\\+')        p = r'\|[0-9]{13}\|'        #staticrule_910112534690101_2_222433082_22        p1 = 'staticrule_\w+\|'        for char in self.specialChar:            temp_line = temp_line.replace(char, '\\' + char)        temp_line = re.sub(p, self.TIME_MATCH_STRING, temp_line)        temp_line = re.sub(p, self.TIME_MATCH_STRING, temp_line)        temp_line = re.sub(p1, r'\w+|', temp_line)        temp_line = temp_line.replace('|', '\\|')        temp_line = temp_line.replace('\r', '\n')        temp_line = temp_line + '\n'        if end_line == 1:            temp_line = temp_line + '\n\n\n\n'        return temp_line    def adjust_file(self, file_path):        with open(file_path, 'rb') as f:            lines = f.readlines()            length = len(lines)            for i in range(length):                line = str(lines[i]).strip()                if line == '':                    continue                if i == (length - 1):                    lines[i] = self.add_backslash(line, 1)                else:                    lines[i] = self.add_backslash(line)        with open(file_path, 'w') as f:            f.writelines(lines)    def adjust(self):        for f in os.listdir(self.folder):            if str(f).find('redis') == -1:                continue            if not str(f).endswith('result'):                continue            file_path = os.path.join(self.folder, f)            self.adjust_file(file_path)if __name__ == '__main__':    #folder = 'C:\Users\g801256\Desktop\New folder'    folder = ''    if folder == '':        folder = os.path.split(os.path.abspath(__file__))[0]    ar = Adjust_Redis(folder)    ar.adjust()